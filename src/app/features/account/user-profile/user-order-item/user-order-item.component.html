@if (order) {
    <div class="flex flex-wrap items-center gap-y-4 border-b border-gray-200 pb-4 md:pb-5">
        <dl class="w-1/2 sm:w-48">
            <dt class="text-base font-medium text-gray-500">Order ID:</dt>
            <dd class="mt-1.5 text-base font-semibold text-gray-900">
                <span>{{order.id}}</span>
            </dd>
        </dl>

        <dl class="w-1/2 sm:w-1/4 md:flex-1 lg:w-auto">
            <dt class="text-base font-medium text-gray-500">Date:</dt>
            <dd class="mt-1.5 text-base font-semibold text-gray-900">{{order.createdAt | date:'dd.MM.yyyy'}}</dd>
        </dl>

        <dl class="w-1/2 sm:w-1/5 md:flex-1 lg:w-auto">
            <dt class="text-base font-medium text-gray-500">Price:</dt>
            <dd class="mt-1.5 text-base font-semibold text-gray-900">{{order.subtotal}}â‚´</dd>
        </dl>

        <dl class="w-1/2 sm:w-1/4 sm:flex-1 lg:w-auto">
            <dt class="text-base font-medium text-gray-500">Status:</dt>
            <dd
                [ngClass]="{
                    'bg-yellow-100 text-yellow-800': order.status === 'Pending' && !isCancelling,
                    'bg-blue-100 text-blue-800': order.status === 'Confirmed' && !isCancelling,
                    'bg-green-100 text-green-800': order.status === 'Done' && !isCancelling,
                    'bg-red-100 text-red-800': order.status === 'Cancelled' && !isCancelling,
                    'bg-gray-100 text-gray-800': isCancelling
                }"
                class="me-2 mt-1.5 inline-flex shrink-0 items-center rounded px-2.5 py-0.5 text-md font-medium">
                
                @if (!isCancelling) {
                    <ng-container [ngSwitch]="order.status">
                        <!-- Pending -->
                        <svg *ngSwitchCase="'Pending'" class="me-1 h-3 w-3" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>

                        <!-- Confirmed -->
                        <svg *ngSwitchCase="'Confirmed'" class="me-1 h-3 w-3" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M5 13l4 4L19 7" />
                        </svg>

                        <!-- Done -->
                        <svg *ngSwitchCase="'Done'" class="me-1 h-3 w-3" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12l2 2l4-4M12 22a10 10 0 100-20 10 10 0 000 20z" />
                        </svg>

                        <!-- Cancelled -->
                        <svg *ngSwitchCase="'Cancelled'" class="me-1 h-3 w-3" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </ng-container>
                    {{ order.status }}
                }
                @else 
                {
                    <div role="status" class="flex items-center gap-2">
                        <svg aria-hidden="true" class="w-4 h-4 text-gray-200 animate-spin fill-blue-600" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591..." fill="currentColor" />
                            <path d="M93.9676 39.0409C96.393 38.4038..." fill="currentFill" />
                        </svg>
                        Loading...
                    </div>
                }

            </dd>
        </dl>

        <div class="w-full sm:flex sm:w-32 sm:items-center sm:justify-end sm:gap-4 relative dropdown-container">
            <button (click)="toggleDropdown()"
                class="flex w-full items-center cursor-pointer justify-center rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm font-medium text-gray-900 hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:outline-none focus:ring-4 focus:ring-gray-100 md:w-auto">
                Actions
                <svg class="-me-0.5 ms-1.5 h-4 w-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24"
                    height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="m19 9-7 7-7-7"></path>
                </svg>
            </button>

            @if (dropdownVisible) {
                <div class="absolute right-0 top-full mt-2 w-40 divide-y divide-gray-100 rounded-lg bg-white shadow z-20">

                    <ul class="p-2 text-left text-sm font-medium text-gray-500">
                        <li>
                            <a
                                class="group inline-flex w-full items-center rounded-md px-3 py-2 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-900 cursor-pointer">
                                <svg class="me-1.5 h-4 w-4 text-gray-400 group-hover:text-gray-900" aria-hidden="true"
                                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                    <path stroke="currentColor" stroke-width="2"
                                        d="M21 12c0 1.2-4.03 6-9 6s-9-4.8-9-6c0-1.2 4.03-6 9-6s9 4.8 9 6Z"></path>
                                    <path stroke="currentColor" stroke-width="2" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path>
                                </svg>
                                Order details
                            </a>
                        </li>
                        @if (order.status == "Pending")
                        {
                            <li (click)="cancelOrder()">
                                <a
                                    class="group inline-flex w-full items-center rounded-md px-3 py-2 text-sm text-red-600 hover:bg-gray-100 cursor-pointer">
                                    <svg class="me-1.5 h-4 w-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24"
                                        height="24" fill="none" viewBox="0 0 24 24">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z">
                                        </path>
                                    </svg>
                                    Cancel order
                                </a>
                            </li>
                        }
                    </ul>

                </div>
            }

        </div>
    </div>
}
